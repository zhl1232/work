# 🔄 数据迁移操作指南

## 📍 当前页面
你的浏览器已经打开了迁移页面：**http://localhost:3000/migrate**

---

## 🎯 操作步骤

### 方法 1: 一键迁移全部（推荐）⭐

1. **点击右下角的按钮** "⚡ 一键迁移全部"
2. 等待几秒钟（通常 3-5 秒）
3. 看到绿色的成功提示

**迁移内容**：
- ✅ 6 个示例项目（像素艺术、火山实验、水火箭等）
- ✅ 2 个讨论帖
- ✅ 3 个挑战赛

### 方法 2: 分别迁移

你也可以分别点击：
- 左上 "迁移项目数据" - 6个项目
- 右上 "迁移讨论数据" - 2个讨论
- 左下 "迁移挑战数据" - 3个挑战

---

## ✅ 成功标志

迁移成功后，你会看到：

```
✅ 迁移成功！

项目 ✓ 6
讨论 ✓ 2  
挑战 ✓ 3

下一步：
1. 打开 Supabase 控制台验证数据
2. 访问探索页面查看项目
3. 访问社区页面查看讨论和挑战
```

---

## 🔍 验证数据

### 方法 1: 在 Supabase 控制台查看

1. 打开 https://supabase.com
2. 登录并进入你的项目
3. 点击左侧 **Table Editor**
4. 查看以下表：
   - `projects` - 应该有 6 条记录
   - `project_materials` - 应该有约 20 条记录
   - `project_steps` - 应该有约 18 条记录
   - `discussions` - 应该有 2 条记录
   - `challenges` - 应该有 3 条记录

### 方法 2: 访问应用页面查看（暂时不会显示）

**注意**：迁移后，前端页面**暂时不会**自动显示新数据，因为：
- 现在前端还在用 `localStorage`
- 需要在后面的步骤中更新前端代码使用 Supabase API

---

## ⚠️ 常见问题

### Q: 点击按钮后报错怎么办？

**可能原因**：
1. **环境变量问题** - 检查 `.env.local` 是否正确
2. **数据已存在** - 如果之前迁移过，会报 duplicate key 错误（可忽略）
3. **网络问题** - 检查是否能访问 Supabase

**解决方法**：
- 重启开发服务器：`pnpm dev`
- 检查浏览器控制台的错误信息
- 告诉我具体错误，我来帮你解决

### Q: 迁移成功但部分数据失败？

这是正常的！可能的原因：
- 某些数据已存在
- 外键约束问题（比如没有作者ID）

只要主要数据（项目、讨论、挑战）迁移成功就可以继续。

### Q: 可以重复迁移吗？

可以，但会报错（因为数据已存在）。

**清空数据重新开始**：
在 Supabase SQL Editor 执行：
```sql
TRUNCATE TABLE projects, discussions, challenges CASCADE;
```

---

## 🎉 迁移完成后

完成数据迁移后，你可以：

1. **实现用户认证**（下一步推荐）
   - 创建登录页面
   - 支持 GitHub/Google 登录
   
2. **测试 API**
   - 访问 http://localhost:3000/api/projects
   - 应该能看到刚迁移的项目数据

3. **更新前端**
   - 让页面从 Supabase 读取数据
   - 替换 localStorage

---

## 📞 需要帮助？

如果遇到任何问题，告诉我：
- 错误信息是什么
- 哪一步失败了
- 浏览器控制台有什么提示

我会帮你解决！
